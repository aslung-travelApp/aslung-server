<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.trip.aslung.plan.model.mapper.PlanMemberMapper">
    <insert id="insertPlanMember" parameterType="com.trip.aslung.plan.model.dto.PlanMember">
        INSERT INTO plan_members (plan_id, user_id, role, status, joined_at)
        VALUES (
                   #{planId},
                   #{userId},
                   #{role},   #{status},
                   #{joinedAt}
               )
    </insert>

    <select id="findByPlanIdAndUserId" resultType="com.trip.aslung.plan.model.dto.PlanMember">
        SELECT
            member_id  AS memberId,
            plan_id    AS planId,
            user_id    AS userId,
            role       AS role,
            status     AS status,
            joined_at  AS joinedAt
        FROM plan_members
        WHERE plan_id = #{planId}
          AND user_id = #{userId}
    </select>
</mapper>